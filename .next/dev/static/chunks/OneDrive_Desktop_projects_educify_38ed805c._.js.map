{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/avbha/OneDrive/Desktop/projects/educify/lib/api.ts"],"sourcesContent":["/**\n * Central API client for frontend-backend communication\n * Handles requests, responses, authentication, and error management\n */\n\nconst API_BASE_URL = \"\";\n\nexport interface ApiResponse<T = any> {\n  success: boolean;\n  data: T | null;\n  message?: string;\n}\n\nexport interface PaginationParams {\n  page?: number;\n  limit?: number;\n}\n\nexport interface PaginatedResponse<T> {\n  data: T[];\n  pagination: {\n    page: number;\n    limit: number;\n    total: number;\n    pages: number;\n  };\n}\n\nexport class ApiError extends Error {\n  constructor(\n    public status: number,\n    message: string,\n    public data?: any\n  ) {\n    super(message);\n    this.name = \"ApiError\";\n  }\n}\n\n/**\n * Generic fetch wrapper for API calls\n */\nexport async function apiFetch<T = any>(\n  endpoint: string,\n  options: RequestInit & { authenticated?: boolean } = {}\n): Promise<T> {\n  const { authenticated = true, ...fetchOptions } = options;\n\n  const url = `/api${endpoint}`;\n\n  const headers: HeadersInit = {\n    \"Content-Type\": \"application/json\",\n    ...(fetchOptions.headers || {}),\n  };\n\n  const response = await fetch(url, {\n    ...fetchOptions,\n    headers,\n    credentials: \"include\", // Important: include cookies for auth\n  });\n\n  // Try to parse JSON body; if it fails, capture text for better error reporting\n  let body: any = null;\n  try {\n    body = await response.json();\n  } catch (jsonErr) {\n    try {\n      const text = await response.text();\n      body = { message: text };\n    } catch (textErr) {\n      body = { message: response.statusText || \"No response body\" };\n    }\n  }\n\n  if (!response.ok) {\n    const message = (body && (body.message || body.error)) || response.statusText || \"API request failed\";\n    throw new ApiError(response.status, message, body?.data ?? body);\n  }\n\n  // If the API returns our wrapper shape, return body.data, otherwise return body directly\n  if (body && typeof body === \"object\" && (\"success\" in body)) {\n    return body.data as T;\n  }\n\n  return body as T;\n}\n\n/**\n * Upload file with multipart form data\n */\nexport async function uploadFile(\n  endpoint: string,\n  file: File,\n  additionalFields: Record<string, string> = {}\n): Promise<any> {\n  const formData = new FormData();\n  formData.append(\"file\", file);\n\n  Object.entries(additionalFields).forEach(([key, value]) => {\n    formData.append(key, value);\n  });\n\n  const url = `/api${endpoint}`;\n\n  const response = await fetch(url, {\n    method: \"POST\",\n    body: formData,\n    credentials: \"include\",\n  });\n\n  const body = await response.json();\n\n  if (!response.ok) {\n    throw new ApiError(\n      response.status,\n      body.message || \"Upload failed\",\n      body.data\n    );\n  }\n\n  return body.data;\n}\n\n// ============================================================================\n// AUTH API\n// ============================================================================\n\nexport interface SignupData {\n  email: string;\n  password: string;\n  confirmPassword: string;\n  fullName: string;\n}\n\nexport interface LoginData {\n  email: string;\n  password: string;\n  rememberMe?: boolean;\n}\n\nexport interface AuthUser {\n  id: string;\n  email: string;\n  name: string;\n  avatar?: string;\n  role: \"STUDENT\" | \"INSTRUCTOR\" | \"ADMIN\";\n}\n\nexport interface AuthResponse {\n  user: AuthUser;\n  token: string;\n}\n\nexport const authApi = {\n  signup: (data: SignupData) =>\n    apiFetch<AuthResponse>(\"/auth/signup\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n      authenticated: false,\n    }),\n\n  login: (data: LoginData) =>\n    apiFetch<AuthResponse>(\"/auth/login\", {\n      method: \"POST\",\n      body: JSON.stringify(data),\n      authenticated: false,\n    }),\n\n  logout: () =>\n    apiFetch(\"/auth/logout\", {\n      method: \"POST\",\n    }),\n\n  googleAuth: (code: string) =>\n    apiFetch<AuthResponse>(\"/auth/google\", {\n      method: \"POST\",\n      body: JSON.stringify({ code }),\n      authenticated: false,\n    }),\n};\n\n// ============================================================================\n// COURSE API\n// ============================================================================\n\nexport interface Course {\n  id: string;\n  title: string;\n  description?: string;\n  instructor: string;\n  instructorId: string;\n  category: string;\n  difficulty: string;\n  rating: number;\n  students: number;\n  duration: string;\n  price: number;\n  thumbnail?: string;\n  status?: string;\n}\n\nexport interface CourseDetail extends Course {\n  highlights?: string[];\n  requirements?: string[];\n  whatYouLearn?: string[];\n  features?: string[];\n  lessons?: any[];\n  modules?: any[];\n}\n\nexport interface CreateCourseData {\n  title: string;\n  description: string;\n  category: string;\n  difficulty: string;\n  price: number;\n  duration: string;\n  highlights?: string[];\n  requirements?: string[];\n  whatYouLearn?: string[];\n}\n\nexport const courseApi = {\n  listCourses: (params: {\n    page?: number;\n    limit?: number;\n    search?: string;\n    category?: string;\n    difficulty?: string;\n  } = {}) => {\n    const searchParams = new URLSearchParams();\n    if (params.page) searchParams.append(\"page\", params.page.toString());\n    if (params.limit) searchParams.append(\"limit\", params.limit.toString());\n    if (params.search) searchParams.append(\"search\", params.search);\n    if (params.category) searchParams.append(\"category\", params.category);\n    if (params.difficulty)\n      searchParams.append(\"difficulty\", params.difficulty);\n\n    return apiFetch<PaginatedResponse<Course>>(\n      `/courses?${searchParams.toString()}`,\n      { authenticated: false }\n    );\n  },\n\n  getCourse: (id: string) =>\n    apiFetch<CourseDetail>(`/courses/${id}`, { authenticated: false }),\n\n  getCourses: (params?: any) =>\n    apiFetch<Course[]>(`/courses`, {\n      authenticated: false,\n      ...params\n    }),\n\n  createCourse: (data: CreateCourseData) =>\n    apiFetch<Course>(`/courses`, {\n      method: \"POST\",\n      body: JSON.stringify(data),\n    }),\n\n  updateCourse: (id: string, data: Partial<CreateCourseData>) =>\n    apiFetch<Course>(`/courses/${id}`, {\n      method: \"PUT\",\n      body: JSON.stringify(data),\n    }),\n\n  deleteCourse: (id: string) =>\n    apiFetch(`/courses/${id}`, {\n      method: \"DELETE\",\n    }),\n\n  addModule: (courseId: string, data: any) =>\n    apiFetch(`/courses/${courseId}/modules`, {\n      method: \"POST\",\n      body: JSON.stringify(data),\n    }),\n  enrollCourse: (courseId: string) =>\n    apiFetch(`/courses/${courseId}/enroll`, {\n      method: \"POST\",\n    }).then((res) => {\n      try {\n        if (typeof window !== \"undefined\") {\n          window.dispatchEvent(new CustomEvent(\"enrollment:created\", { detail: res }));\n        }\n      } catch (e) {\n        /* ignore */\n      }\n      return res;\n    }),\n};\n\n// ============================================================================\n// ENROLLMENT API\n// ============================================================================\n\nexport interface Enrollment {\n  id: string;\n  courseId: string;\n  course: Course;\n  progress: number;\n  status: string;\n  enrolledAt: string;\n  lastAccessed?: string;\n}\n\nexport const enrollmentApi = {\n  enroll: (courseId: string) =>\n    // prefer course-level enroll endpoint which returns enrollment with course details\n    courseApi.enrollCourse ? courseApi.enrollCourse(courseId) : apiFetch<Enrollment>(\"/enrollments\", {\n      method: \"POST\",\n      body: JSON.stringify({ courseId }),\n    }),\n\n  checkEnrollment: (courseId: string) =>\n    apiFetch<{ enrolled: boolean; enrollment?: Enrollment }>(\n      `/enrollments/${courseId}`\n    ),\n\n  getUserEnrollments: (userId: string) =>\n    apiFetch<Enrollment[]>(`/users/${userId}/enrollments`),\n};\n\n// ============================================================================\n// WISHLIST API\n// ============================================================================\n\nexport interface WishlistItem {\n  id: string;\n  courseId: string;\n  course: Course;\n  addedAt: string;\n}\n\nexport const wishlistApi = {\n  getWishlist: () => apiFetch<WishlistItem[]>(\"/wishlist\"),\n\n  addToWishlist: (courseId: string) =>\n    apiFetch<WishlistItem>(\"/wishlist\", {\n      method: \"POST\",\n      body: JSON.stringify({ courseId }),\n    }),\n\n  checkInWishlist: (courseId: string) =>\n    apiFetch<{ inWishlist: boolean }>(`/wishlist/${courseId}`),\n\n  removeFromWishlist: (courseId: string) =>\n    apiFetch(`/wishlist/${courseId}`, {\n      method: \"DELETE\",\n    }),\n};\n\n// ============================================================================\n// USER API\n// ============================================================================\n\nexport interface UserProfile {\n  id: string;\n  name: string;\n  email: string;\n  phone?: string;\n  location?: string;\n  bio?: string;\n  avatar?: string;\n  joinDate: string;\n  role: string;\n  coursesEnrolled: number;\n  certificatesEarned: number;\n  totalHours: number;\n}\n\nexport interface UserPreferences {\n  emailNotifications: boolean;\n  marketingEmails: boolean;\n  courseRecommendations: boolean;\n}\n\nexport interface UserStatistics {\n  totalCoursesEnrolled: number;\n  completedCourses: number;\n  currentStreak: number;\n  totalHoursSpent: number;\n  certificatesEarned: number;\n  averageRating: number;\n}\n\nexport interface DashboardData {\n  stats: {\n    activeCourses: number;\n    totalHours: number;\n    completedCourses: number;\n    currentStreak: number;\n  };\n  enrolledCourses: Enrollment[];\n  recommendedCourses: Course[];\n}\n\nexport const userApi = {\n  getProfile: (userId: string) =>\n    apiFetch<UserProfile>(`/users/${userId}/profile`),\n\n  updateProfile: (userId: string, data: FormData | Partial<UserProfile>) => {\n    if (data instanceof FormData) {\n      const url = `/api/users/${userId}`;\n      return fetch(url, {\n        method: \"PUT\",\n        body: data,\n        credentials: \"include\",\n      }).then((res) => res.json());\n    }\n    return apiFetch<UserProfile>(`/users/${userId}`, {\n      method: \"PUT\",\n      body: JSON.stringify(data),\n    });\n  },\n\n  getPreferences: (userId: string) =>\n    apiFetch<UserPreferences>(`/users/${userId}/preferences`),\n\n  updatePreferences: (userId: string, data: UserPreferences) =>\n    apiFetch<UserPreferences>(`/users/${userId}/preferences`, {\n      method: \"PUT\",\n      body: JSON.stringify(data),\n    }),\n\n  getStatistics: (userId: string) =>\n    apiFetch<UserStatistics>(`/users/${userId}/statistics`),\n\n  getDashboard: (userId: string) =>\n    apiFetch<DashboardData>(`/users/${userId}/dashboard`),\n\n  getCreatedCourses: (userId: string) =>\n    apiFetch<Course[]>(`/users/${userId}/courses-created`),\n};\n\n// ============================================================================\n// SEARCH API\n// ============================================================================\n\nexport const searchApi = {\n  searchCourses: (query: string, limit: number = 10) =>\n    apiFetch<Course[]>(\n      `/search/courses?q=${encodeURIComponent(query)}&limit=${limit}`,\n      { authenticated: false }\n    ),\n};\n\n// ============================================================================\n// RECOMMENDATIONS API\n// ============================================================================\n\nexport const recommendationsApi = {\n  getRecommendations: (limit: number = 3) =>\n    apiFetch<Course[]>(`/recommendations?limit=${limit}`),\n};\n\n// ============================================================================\n// UPLOAD API\n// ============================================================================\n\nexport interface UploadResponse {\n  url: string;\n  fileName: string;\n  size: number;\n  type: string;\n}\n\nexport interface PresignedUrlResponse {\n  presignedUrl: string;\n  path: string;\n  expiresIn: number;\n}\n\nexport const uploadApi = {\n  uploadFile: (file: File, type: \"thumbnail\" | \"video\" | \"document\") =>\n    uploadFile(\"/upload\", file, { type }),\n\n  getPresignedUrl: (fileName: string, fileType: string, type: string) =>\n    apiFetch<PresignedUrlResponse>(\"/upload/presign\", {\n      method: \"PUT\",\n      body: JSON.stringify({ fileName, fileType, type }),\n    }),\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 243, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/avbha/OneDrive/Desktop/projects/educify/lib/useAuth.ts"],"sourcesContent":["/**\n * useAuth Hook - Manages authentication state and operations\n * Handles signup, login, logout, and current user context\n * \n * FIXES:\n * - Validates user exists in database before restoring from localStorage\n * - Auto-logout if user record is deleted or doesn't exist\n * - NO auto-login without valid token + user in DB\n * - Properly clears auth state on logout\n * - Redirects to /auth/login on logout\n */\n\n\"use client\";\n\nimport { useState, useCallback, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { authApi, AuthUser } from \"@/lib/api\";\n\ninterface UseAuthState {\n  user: AuthUser | null;\n  token: string | null;\n  isLoading: boolean;\n  error: string | null;\n  isAuthenticated: boolean;\n}\n\nconst initialState: UseAuthState = {\n  user: null,\n  token: null,\n  isLoading: false,\n  error: null,\n  isAuthenticated: false,\n};\n\n/**\n * Custom hook for authentication\n * Manages user state and provides auth methods\n */\nexport function useAuth() {\n  const router = useRouter();\n  const [state, setState] = useState<UseAuthState>(initialState);\n  const [isInitialized, setIsInitialized] = useState(false);\n\n  // Initialize from localStorage and validate user exists in DB\n  useEffect(() => {\n    const initializeAuth = async () => {\n      try {\n        const stored = localStorage.getItem(\"auth-state\");\n        if (stored) {\n          const parsed = JSON.parse(stored);\n          \n          // Only restore if both user and token exist\n          if (parsed?.user && parsed?.token) {\n            // Validate user still exists in database\n            try {\n              const userExists = await fetch(`/api/users/${parsed.user.id}/profile`, {\n                method: \"GET\",\n                credentials: \"include\",\n                headers: { \"Content-Type\": \"application/json\" },\n              }).then(r => r.ok);\n              \n              if (userExists) {\n                // User is valid, restore state\n                setState({\n                  user: parsed.user,\n                  token: parsed.token,\n                  isAuthenticated: true,\n                  isLoading: false,\n                  error: null,\n                });\n              } else {\n                // User doesn't exist in DB, force logout\n                localStorage.removeItem(\"auth-state\");\n                router.push(\"/auth/login\");\n              }\n            } catch (validateError) {\n              // Network error during validation, clear auth to be safe\n              console.error(\"Failed to validate user:\", validateError);\n              localStorage.removeItem(\"auth-state\");\n              router.push(\"/auth/login\");\n            }\n          } else {\n            // Invalid stored state, clear it\n            localStorage.removeItem(\"auth-state\");\n          }\n        }\n      } catch (error) {\n        console.error(\"Failed to restore auth state:\", error);\n        localStorage.removeItem(\"auth-state\");\n      }\n      \n      // Mark as initialized so components know auth check is complete\n      setIsInitialized(true);\n    };\n\n    initializeAuth();\n  }, [router]);\n\n  // Persist state to localStorage (only if authenticated)\n  useEffect(() => {\n    if (isInitialized) {\n      if (state.isAuthenticated && state.token && state.user) {\n        localStorage.setItem(\"auth-state\", JSON.stringify(state));\n      } else {\n        // If not authenticated, clear localStorage\n        localStorage.removeItem(\"auth-state\");\n      }\n    }\n  }, [state, isInitialized]);\n\n  const handleSignup = useCallback(\n    async (data: {\n      email: string;\n      password: string;\n      confirmPassword: string;\n      fullName: string;\n    }) => {\n      setState((prev) => ({ ...prev, isLoading: true, error: null }));\n      try {\n        const response = await authApi.signup(data);\n        setState({\n          user: response.user,\n          token: response.token,\n          isAuthenticated: true,\n          isLoading: false,\n          error: null,\n        });\n        return response;\n      } catch (error: any) {\n        const errorMessage = error.message || \"Signup failed\";\n        setState((prev: any) => ({\n          ...prev,\n          error: errorMessage,\n          isLoading: false,\n        }));\n        throw error;\n      }\n    },\n    []\n  );\n\n  const handleLogin = useCallback(\n    async (data: { email: string; password: string; rememberMe?: boolean }) => {\n      setState((prev) => ({ ...prev, isLoading: true, error: null }));\n      try {\n        const response = await authApi.login(data);\n        setState({\n          user: response.user,\n          token: response.token,\n          isAuthenticated: true,\n          isLoading: false,\n          error: null,\n        });\n        return response;\n      } catch (error: any) {\n        const errorMessage = error.message || \"Login failed\";\n        setState((prev: any) => ({\n          ...prev,\n          error: errorMessage,\n          isLoading: false,\n        }));\n        throw error;\n      }\n    },\n    []\n  );\n\n  const handleLogout = useCallback(async () => {\n    setState((prev) => ({ ...prev, isLoading: true }));\n    try {\n      await authApi.logout();\n      // Clear all auth state\n      setState(initialState);\n      // Clear localStorage\n      localStorage.removeItem(\"auth-state\");\n      // Redirect to login\n      router.push(\"/auth/login\");\n    } catch (error: any) {\n      console.error(\"Logout error:\", error);\n      // Even if logout fails, clear state and redirect\n      setState(initialState);\n      localStorage.removeItem(\"auth-state\");\n      router.push(\"/auth/login\");\n    }\n  }, [router]);\n\n  const setError = useCallback((error: string | null) => {\n    setState((prev) => ({ ...prev, error }));\n  }, []);\n\n  const clearError = useCallback(() => {\n    setState((prev) => ({ ...prev, error: null }));\n  }, []);\n\n  return {\n    ...state,\n    isInitialized,\n    signup: handleSignup,\n    login: handleLogin,\n    logout: handleLogout,\n    setError,\n    clearError,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 486, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/avbha/OneDrive/Desktop/projects/educify/components/sidebar-nav.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\nimport { Menu, X, BookOpen, Compass, Upload, BarChart3, User, LogOut } from 'lucide-react'\nimport { useAuth } from '@/lib/useAuth'\n\nconst navItems = [\n  { href: '/', label: 'Home', icon: BookOpen },\n  { href: '/catalog', label: 'Explore', icon: Compass },\n  { href: '/upload', label: 'Upload', icon: Upload },\n  { href: '/dashboard', label: 'Dashboard', icon: BarChart3 },\n  { href: '/profile', label: 'Profile', icon: User },\n]\n\nexport function SidebarNav() {\n  const [isOpen, setIsOpen] = useState(false)\n  const pathname = usePathname()\n  const { logout } = useAuth()\n\n  const handleLogout = async () => {\n    try {\n      await logout()\n      setIsOpen(false)\n    } catch (error) {\n      console.error('Logout failed:', error)\n    }\n  }\n\n  return (\n    <>\n      {/* Mobile Toggle */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"fixed top-4 left-4 z-50 p-2 rounded-lg md:hidden bg-card hover-glow border border-border\"\n      >\n        {isOpen ? <X size={20} /> : <Menu size={20} />}\n      </button>\n\n      {/* Sidebar */}\n      <aside\n        className={`fixed left-0 top-0 h-screen w-64 bg-sidebar border-r border-border transform transition-transform md:translate-x-0 z-40 ${isOpen ? 'translate-x-0' : '-translate-x-full'\n          }`}\n      >\n        <div className=\"p-6 border-b border-border/50\">\n          <Link href=\"/\" className=\"flex items-center gap-3 font-bold text-xl hover:opacity-80 transition-opacity\">\n            <div className=\"w-10 h-10 rounded-xl bg-linear-to-br from-violet-600 to-indigo-600 flex items-center justify-center shadow-lg shadow-indigo-500/20\">\n              <BookOpen className=\"text-white\" size={24} />\n            </div>\n            <span className=\"bg-clip-text text-transparent bg-linear-to-r from-white to-white/70\">Educify</span>\n          </Link>\n        </div>\n\n        <nav className=\"p-4 space-y-2\">\n          {navItems.map((item) => {\n            const Icon = item.icon\n            const isActive = pathname === item.href\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                onClick={() => setIsOpen(false)}\n                className={`flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${isActive\n                    ? 'bg-primary text-primary-foreground glow-blue'\n                    : 'text-foreground hover:bg-card border border-transparent hover:border-border'\n                  }`}\n              >\n                <Icon size={20} />\n                <span className=\"font-medium\">{item.label}</span>\n              </Link>\n            )\n          })}\n        </nav>\n\n        <div className=\"absolute bottom-6 left-4 right-4\">\n          <button\n            onClick={handleLogout}\n            className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-foreground hover:bg-card border border-transparent hover:border-border transition-all\"\n          >\n            <LogOut size={20} />\n            <span className=\"font-medium\">Logout</span>\n          </button>\n        </div>\n      </aside>\n\n      {/* Mobile Overlay */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/50 z-30 md:hidden\"\n          onClick={() => setIsOpen(false)}\n        />\n      )}\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AANA;;;;;;AAQA,MAAM,WAAW;IACf;QAAE,MAAM;QAAK,OAAO;QAAQ,MAAM,2QAAQ;IAAC;IAC3C;QAAE,MAAM;QAAY,OAAO;QAAW,MAAM,oQAAO;IAAC;IACpD;QAAE,MAAM;QAAW,OAAO;QAAU,MAAM,iQAAM;IAAC;IACjD;QAAE,MAAM;QAAc,OAAO;QAAa,MAAM,gRAAS;IAAC;IAC1D;QAAE,MAAM;QAAY,OAAO;QAAW,MAAM,2PAAI;IAAC;CAClD;AAEM,SAAS;;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,uNAAQ,EAAC;IACrC,MAAM,WAAW,IAAA,kMAAW;IAC5B,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,0KAAO;IAE1B,MAAM,eAAe;QACnB,IAAI;YACF,MAAM;YACN,UAAU;QACZ,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kBAAkB;QAClC;IACF;IAEA,qBACE;;0BAEE,2OAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;0BAET,uBAAS,2OAAC,kPAAC;oBAAC,MAAM;;;;;yCAAS,2OAAC,2PAAI;oBAAC,MAAM;;;;;;;;;;;0BAI1C,2OAAC;gBACC,WAAW,CAAC,wHAAwH,EAAE,SAAS,kBAAkB,qBAC7J;;kCAEJ,2OAAC;wBAAI,WAAU;kCACb,cAAA,2OAAC,wNAAI;4BAAC,MAAK;4BAAI,WAAU;;8CACvB,2OAAC;oCAAI,WAAU;8CACb,cAAA,2OAAC,2QAAQ;wCAAC,WAAU;wCAAa,MAAM;;;;;;;;;;;8CAEzC,2OAAC;oCAAK,WAAU;8CAAsE;;;;;;;;;;;;;;;;;kCAI1F,2OAAC;wBAAI,WAAU;kCACZ,SAAS,GAAG,CAAC,CAAC;4BACb,MAAM,OAAO,KAAK,IAAI;4BACtB,MAAM,WAAW,aAAa,KAAK,IAAI;4BACvC,qBACE,2OAAC,wNAAI;gCAEH,MAAM,KAAK,IAAI;gCACf,SAAS,IAAM,UAAU;gCACzB,WAAW,CAAC,4DAA4D,EAAE,WACpE,iDACA,+EACF;;kDAEJ,2OAAC;wCAAK,MAAM;;;;;;kDACZ,2OAAC;wCAAK,WAAU;kDAAe,KAAK,KAAK;;;;;;;+BATpC,KAAK,IAAI;;;;;wBAYpB;;;;;;kCAGF,2OAAC;wBAAI,WAAU;kCACb,cAAA,2OAAC;4BACC,SAAS;4BACT,WAAU;;8CAEV,2OAAC,qQAAM;oCAAC,MAAM;;;;;;8CACd,2OAAC;oCAAK,WAAU;8CAAc;;;;;;;;;;;;;;;;;;;;;;;YAMnC,wBACC,2OAAC;gBACC,WAAU;gBACV,SAAS,IAAM,UAAU;;;;;;;;AAKnC;GA/EgB;;QAEG,kMAAW;QACT,0KAAO;;;KAHZ"}},
    {"offset": {"line": 719, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/avbha/OneDrive/Desktop/projects/educify/components/top-bar.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport { Bell, Search, Settings, LogOut, User } from 'lucide-react'\nimport { useAuth } from '@/lib/useAuth'\n\nexport function TopBar() {\n  const router = useRouter()\n  const { logout, isLoading } = useAuth()\n  const [loggingOut, setLoggingOut] = useState(false)\n\n  const handleLogout = async () => {\n    try {\n      setLoggingOut(true)\n      await logout()\n      router.push('/auth/login')\n    } catch (e) {\n      console.error('Logout failed', e)\n      setLoggingOut(false)\n    }\n  }\n\n  return (\n    <header className=\"sticky top-0 z-20 w-full border-b border-border/50 bg-background/80 backdrop-blur-xl\">\n      <div className=\"flex items-center justify-between h-16 px-4 md:px-8\">\n        <div className=\"hidden md:flex flex-1 items-center gap-3 max-w-md group\">\n          <div className=\"p-2 rounded-lg bg-secondary/10 text-muted-foreground group-focus-within:text-primary transition-colors\">\n            <Search size={18} />\n          </div>\n          <input\n            type=\"text\"\n            placeholder=\"Search for anything...\"\n            className=\"w-full bg-transparent border-none text-sm focus:outline-none placeholder:text-muted-foreground/50\"\n          />\n        </div>\n\n        <div className=\"flex items-center gap-3 ml-auto\">\n          <button className=\"p-2.5 rounded-full hover:bg-secondary/10 text-muted-foreground hover:text-foreground transition-all relative\">\n            <Bell size={20} />\n            <span className=\"absolute top-2 right-2.5 w-2 h-2 rounded-full bg-red-500 border-2 border-background\" />\n          </button>\n\n          <button className=\"p-2.5 rounded-full hover:bg-secondary/10 text-muted-foreground hover:text-foreground transition-all\">\n            <Settings size={20} />\n          </button>\n\n          <div className=\"h-6 w-px bg-border/50 mx-2\" />\n\n          <div className=\"flex items-center gap-3 pl-2\">\n            <div className=\"hidden md:block text-right\">\n              <p className=\"text-sm font-semibold leading-none\">User</p>\n              <p className=\"text-xs text-muted-foreground mt-1\">Student</p>\n            </div>\n            <div className=\"w-10 h-10 rounded-full bg-linear-to-br from-fuchsia-600 to-pink-600 p-0.5 cursor-pointer hover:scale-105 transition-transform shadow-lg shadow-pink-500/20\">\n              <div className=\"w-full h-full rounded-full bg-background flex items-center justify-center overflow-hidden\">\n                <User className=\"text-foreground/80\" size={20} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;;;AALA;;;;;AAOO,SAAS;;IACd,MAAM,SAAS,IAAA,gMAAS;IACxB,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,0KAAO;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,uNAAQ,EAAC;IAE7C,MAAM,eAAe;QACnB,IAAI;YACF,cAAc;YACd,MAAM;YACN,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,cAAc;QAChB;IACF;IAEA,qBACE,2OAAC;QAAO,WAAU;kBAChB,cAAA,2OAAC;YAAI,WAAU;;8BACb,2OAAC;oBAAI,WAAU;;sCACb,2OAAC;4BAAI,WAAU;sCACb,cAAA,2OAAC,iQAAM;gCAAC,MAAM;;;;;;;;;;;sCAEhB,2OAAC;4BACC,MAAK;4BACL,aAAY;4BACZ,WAAU;;;;;;;;;;;;8BAId,2OAAC;oBAAI,WAAU;;sCACb,2OAAC;4BAAO,WAAU;;8CAChB,2OAAC,2PAAI;oCAAC,MAAM;;;;;;8CACZ,2OAAC;oCAAK,WAAU;;;;;;;;;;;;sCAGlB,2OAAC;4BAAO,WAAU;sCAChB,cAAA,2OAAC,uQAAQ;gCAAC,MAAM;;;;;;;;;;;sCAGlB,2OAAC;4BAAI,WAAU;;;;;;sCAEf,2OAAC;4BAAI,WAAU;;8CACb,2OAAC;oCAAI,WAAU;;sDACb,2OAAC;4CAAE,WAAU;sDAAqC;;;;;;sDAClD,2OAAC;4CAAE,WAAU;sDAAqC;;;;;;;;;;;;8CAEpD,2OAAC;oCAAI,WAAU;8CACb,cAAA,2OAAC;wCAAI,WAAU;kDACb,cAAA,2OAAC,2PAAI;4CAAC,WAAU;4CAAqB,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ3D;GAzDgB;;QACC,gMAAS;QACM,0KAAO;;;KAFvB"}},
    {"offset": {"line": 927, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/avbha/OneDrive/Desktop/projects/educify/components/page-layout.tsx"],"sourcesContent":["'use client'\n\nimport { ReactNode } from 'react'\nimport { SidebarNav } from './sidebar-nav'\nimport { TopBar } from './top-bar'\n\ninterface PageLayoutProps {\n  children: ReactNode\n  showTopBar?: boolean\n}\n\nexport function PageLayout({ children, showTopBar = true }: PageLayoutProps) {\n  return (\n    <div className=\"flex h-screen\">\n      <SidebarNav />\n      <div className=\"flex-1 flex flex-col md:ml-64 overflow-hidden\">\n        {showTopBar && <TopBar />}\n        <main className=\"flex-1 overflow-auto\">\n          {children}\n        </main>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AAWO,SAAS,WAAW,EAAE,QAAQ,EAAE,aAAa,IAAI,EAAmB;IACzE,qBACE,2OAAC;QAAI,WAAU;;0BACb,2OAAC,4LAAU;;;;;0BACX,2OAAC;gBAAI,WAAU;;oBACZ,4BAAc,2OAAC,oLAAM;;;;;kCACtB,2OAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAKX;KAZgB"}},
    {"offset": {"line": 986, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/avbha/OneDrive/Desktop/projects/educify/components/course-card.tsx"],"sourcesContent":["'use client'\n\nimport Link from 'next/link'\nimport { Star, Users, Clock } from 'lucide-react'\n\ninterface CourseCardProps {\n  id: string\n  title: string\n  instructor: string\n  category: string\n  difficulty: string\n  rating: number\n  students: number\n  duration: string\n  thumbnail?: string\n}\n\nexport function CourseCard({\n  id,\n  title,\n  instructor,\n  category,\n  difficulty,\n  duration,\n  thumbnail,\n  onDelete,\n}: CourseCardProps & { onDelete?: (id: string) => void }) {\n  return (\n    <div className=\"group relative h-full rounded-2xl border border-border/50 bg-card overflow-hidden hover:shadow-2xl hover:shadow-primary/5 hover:-translate-y-1 transition-all duration-300 flex flex-col\">\n      <Link href={`/course/${id}`} className=\"flex-1 flex flex-col\">\n        {/* Thumbnail */}\n        <div className=\"relative aspect-[16/9] w-full bg-muted overflow-hidden\">\n          {thumbnail ? (\n            <img\n              src={thumbnail}\n              alt={title}\n              className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700\"\n            />\n          ) : (\n            <div className=\"w-full h-full flex items-center justify-center bg-linear-to-br from-secondary/20 to-primary/10\">\n              <div className=\"text-5xl opacity-20 grayscale\">ðŸŽ“</div>\n            </div>\n          )}\n          <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-60 group-hover:opacity-40 transition-opacity\" />\n\n          {/* Category Badge */}\n          <div className=\"absolute top-3 left-3\">\n            <span className=\"px-3 py-1 rounded-full bg-white/10 backdrop-blur-md text-white text-[10px] font-bold uppercase tracking-wider border border-white/20 shadow-lg\">\n              {category.replace(/_/g, ' ')}\n            </span>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"p-5 flex flex-col flex-1 gap-4\">\n          <h3 className=\"font-bold text-lg leading-snug group-hover:text-primary transition-colors line-clamp-2\">\n            {title}\n          </h3>\n\n          <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n            <div className=\"w-6 h-6 rounded-full bg-secondary/20 flex items-center justify-center text-xs font-bold text-secondary-foreground\">\n              {(instructor && instructor !== 'Unknown' ? instructor[0] : 'E')}\n            </div>\n            <span className=\"font-medium\">{instructor === 'Unknown' ? 'Educify Instructor' : instructor}</span>\n          </div>\n\n          <div className=\"mt-auto pt-4 border-t border-border/50 flex items-center justify-between text-xs font-medium text-muted-foreground\">\n            <div className=\"flex items-center gap-1.5\">\n              <Clock size={14} className=\"text-primary/70\" />\n              <span>{duration}</span>\n            </div>\n          </div>\n        </div>\n      </Link>\n\n      {/* Delete Button (Overlay) */}\n      {onDelete && (\n        <div className=\"absolute top-3 right-3 z-10 opacity-0 group-hover:opacity-100 translate-x-2 group-hover:translate-x-0 transition-all duration-300\">\n          <ConfirmationModal\n            title=\"Delete Course?\"\n            description=\"Are you sure you want to delete this course? This action cannot be undone and will remove all videos and enrollments.\"\n            confirmText=\"Delete Course\"\n            variant=\"destructive\"\n            onConfirm={async () => onDelete(id)}\n            trigger={\n              <button\n                className=\"p-2 rounded-xl bg-red-500/80 hover:bg-red-500 text-white backdrop-blur-md shadow-lg transition-colors\"\n                title=\"Delete Course\"\n                onClick={(e) => e.stopPropagation()} // Prevent card click\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                  <path d=\"M3 6h18\"></path>\n                  <path d=\"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\"></path>\n                  <path d=\"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\"></path>\n                </svg>\n              </button>\n            }\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAiBO,SAAS,WAAW,EACzB,EAAE,EACF,KAAK,EACL,UAAU,EACV,QAAQ,EACR,UAAU,EACV,QAAQ,EACR,SAAS,EACT,QAAQ,EAC8C;IACtD,qBACE,2OAAC;QAAI,WAAU;;0BACb,2OAAC,wNAAI;gBAAC,MAAM,CAAC,QAAQ,EAAE,IAAI;gBAAE,WAAU;;kCAErC,2OAAC;wBAAI,WAAU;;4BACZ,0BACC,2OAAC;gCACC,KAAK;gCACL,KAAK;gCACL,WAAU;;;;;qDAGZ,2OAAC;gCAAI,WAAU;0CACb,cAAA,2OAAC;oCAAI,WAAU;8CAAgC;;;;;;;;;;;0CAGnD,2OAAC;gCAAI,WAAU;;;;;;0CAGf,2OAAC;gCAAI,WAAU;0CACb,cAAA,2OAAC;oCAAK,WAAU;8CACb,SAAS,OAAO,CAAC,MAAM;;;;;;;;;;;;;;;;;kCAM9B,2OAAC;wBAAI,WAAU;;0CACb,2OAAC;gCAAG,WAAU;0CACX;;;;;;0CAGH,2OAAC;gCAAI,WAAU;;kDACb,2OAAC;wCAAI,WAAU;kDACX,cAAc,eAAe,YAAY,UAAU,CAAC,EAAE,GAAG;;;;;;kDAE7D,2OAAC;wCAAK,WAAU;kDAAe,eAAe,YAAY,uBAAuB;;;;;;;;;;;;0CAGnF,2OAAC;gCAAI,WAAU;0CACb,cAAA,2OAAC;oCAAI,WAAU;;sDACb,2OAAC,8PAAK;4CAAC,MAAM;4CAAI,WAAU;;;;;;sDAC3B,2OAAC;sDAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAOd,0BACC,2OAAC;gBAAI,WAAU;0BACb,cAAA,2OAAC;oBACC,OAAM;oBACN,aAAY;oBACZ,aAAY;oBACZ,SAAQ;oBACR,WAAW,UAAY,SAAS;oBAChC,uBACE,2OAAC;wBACC,WAAU;wBACV,OAAM;wBACN,SAAS,CAAC,IAAM,EAAE,eAAe;kCAEjC,cAAA,2OAAC;4BAAI,OAAM;4BAA6B,OAAM;4BAAK,QAAO;4BAAK,SAAQ;4BAAY,MAAK;4BAAO,QAAO;4BAAe,aAAY;4BAAI,eAAc;4BAAQ,gBAAe;;8CACxK,2OAAC;oCAAK,GAAE;;;;;;8CACR,2OAAC;oCAAK,GAAE;;;;;;8CACR,2OAAC;oCAAK,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS1B;KArFgB"}},
    {"offset": {"line": 1220, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/avbha/OneDrive/Desktop/projects/educify/components/animated-button.tsx"],"sourcesContent":["'use client'\n\nimport { ReactNode } from 'react'\n\ninterface AnimatedButtonProps {\n  children: ReactNode\n  onClick?: () => void\n  className?: string\n  variant?: 'primary' | 'secondary' | 'outline'\n  size?: 'sm' | 'md' | 'lg'\n}\n\nexport function AnimatedButton({\n  children,\n  onClick,\n  className = '',\n  variant = 'primary',\n  size = 'md',\n}: AnimatedButtonProps) {\n  const baseStyles = 'font-semibold rounded-lg transition-all duration-300 hover-glow border'\n\n  const variants = {\n    primary: 'bg-linear-to-r from-violet-600 to-indigo-600 text-white border-transparent hover:from-violet-500 hover:to-indigo-500 shadow-lg shadow-indigo-500/20',\n    secondary: 'bg-linear-to-r from-fuchsia-600 to-pink-600 text-white border-transparent hover:from-fuchsia-500 hover:to-pink-500 shadow-lg shadow-pink-500/20',\n    outline: 'border-white/10 bg-white/5 text-white hover:bg-white/10 hover:border-white/20 backdrop-blur-sm',\n  }\n\n  const sizes = {\n    sm: 'px-3 py-2 text-sm',\n    md: 'px-4 py-2.5 text-base',\n    lg: 'px-6 py-3 text-lg',\n  }\n\n  return (\n    <button\n      onClick={onClick}\n      className={`${baseStyles} ${variants[variant]} ${sizes[size]} ${className}`}\n    >\n      {children}\n    </button>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAYO,SAAS,eAAe,EAC7B,QAAQ,EACR,OAAO,EACP,YAAY,EAAE,EACd,UAAU,SAAS,EACnB,OAAO,IAAI,EACS;IACpB,MAAM,aAAa;IAEnB,MAAM,WAAW;QACf,SAAS;QACT,WAAW;QACX,SAAS;IACX;IAEA,MAAM,QAAQ;QACZ,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,2OAAC;QACC,SAAS;QACT,WAAW,GAAG,WAAW,CAAC,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,WAAW;kBAE1E;;;;;;AAGP;KA7BgB"}},
    {"offset": {"line": 1259, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/avbha/OneDrive/Desktop/projects/educify/app/dashboard/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { BarChart3, Clock, CheckCircle, BookOpen, TrendingUp, Download, Settings, Loader2 } from 'lucide-react'\nimport { PageLayout } from '@/components/page-layout'\nimport { CourseCard } from '@/components/course-card'\nimport { AnimatedButton } from '@/components/animated-button'\nimport Link from 'next/link'\nimport { useAuth } from '@/lib/useAuth'\nimport { userApi, DashboardData, Enrollment, Course } from '@/lib/api'\n\ninterface StatCardProps {\n  icon: React.ReactNode\n  label: string\n  value: string | number\n  bg: string\n}\n\nfunction StatCard({ icon, label, value, bg }: StatCardProps) {\n  return (\n    <div className=\"p-6 rounded-xl border border-white/5 bg-white/5 backdrop-blur-sm hover:bg-white/10 transition-all duration-300 group\">\n      <div className=\"flex items-center gap-4 mb-4\">\n        <div className={`w-12 h-12 rounded-xl flex items-center justify-center ${bg} group-hover:scale-110 transition-transform duration-300`}>\n          {icon}\n        </div>\n        <p className=\"text-sm text-muted-foreground font-medium\">{label}</p>\n      </div>\n      <p className=\"text-3xl font-bold bg-clip-text text-transparent bg-linear-to-r from-white to-white/60\">{value}</p>\n    </div>\n  )\n}\n\nexport default function DashboardPage() {\n  const { user, isAuthenticated } = useAuth()\n  const [dashboardData, setDashboardData] = useState<DashboardData | null>(null)\n  const [createdCourses, setCreatedCourses] = useState<Course[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [activeTab, setActiveTab] = useState<'learning' | 'teaching'>('learning')\n\n  // Fetch dashboard data on mount\n  useEffect(() => {\n    const fetchData = async () => {\n      if (!isAuthenticated || !user?.id) {\n        setIsLoading(false)\n        return\n      }\n\n      try {\n        setIsLoading(true)\n        setError(null)\n\n        // Parallel fetch\n        const [dashData, createdData] = await Promise.all([\n          userApi.getDashboard(user.id),\n          userApi.getCreatedCourses(user.id).catch(() => []) // Fail gracefully for created courses\n        ])\n\n        setDashboardData(dashData)\n        setCreatedCourses(createdData)\n      } catch (err: any) {\n        console.error('Failed to fetch dashboard data:', err)\n        setError(err.message || 'Failed to load dashboard')\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    fetchData()\n  }, [user?.id, isAuthenticated])\n\n  // Set up real-time enrollment listener\n  useEffect(() => {\n    const onEnrollmentCreated = (e: Event) => {\n      try {\n        const customEvent = e as CustomEvent\n        const payload = customEvent?.detail\n        if (!payload) return\n\n        setDashboardData((prev) => {\n          if (!prev) return prev\n          // Check if enrollment already exists\n          const exists = prev.enrolledCourses.find((c) => c.id === payload.id)\n          if (exists) return prev\n\n          // Add new enrollment and increment stats\n          return {\n            ...prev,\n            enrolledCourses: [payload, ...prev.enrolledCourses],\n            stats: {\n              ...prev.stats,\n              activeCourses: prev.stats.activeCourses + 1,\n            },\n          }\n        })\n      } catch (err) {\n        console.error('Failed to apply enrollment event:', err)\n      }\n    }\n\n    if (typeof window !== 'undefined') {\n      window.addEventListener('enrollment:created', onEnrollmentCreated)\n    }\n\n    return () => {\n      if (typeof window !== 'undefined') {\n        window.removeEventListener('enrollment:created', onEnrollmentCreated)\n      }\n    }\n  }, [])\n\n  // Show loading state\n  if (isLoading) {\n    return (\n      <PageLayout>\n        <div className=\"p-4 md:p-8 flex items-center justify-center min-h-screen\">\n          <div className=\"text-center\">\n            <Loader2 className=\"w-12 h-12 animate-spin text-primary mx-auto mb-4\" />\n            <p className=\"text-muted-foreground\">Loading your dashboard...</p>\n          </div>\n        </div>\n      </PageLayout>\n    )\n  }\n\n  // Use dashboard data or empty defaults\n  const stats = dashboardData?.stats || {\n    activeCourses: 0,\n    totalHours: 0,\n    completedCourses: 0,\n    currentStreak: 0,\n  }\n\n  const enrolledCourses = dashboardData?.enrolledCourses || []\n  const recommendedCourses = dashboardData?.recommendedCourses || []\n\n  return (\n    <PageLayout>\n      <div className=\"p-4 md:p-8\">\n        {/* Header */}\n        <div className=\"mb-8 flex flex-col md:flex-row md:items-center justify-between gap-4\">\n          <div>\n            <h1 className=\"text-4xl md:text-5xl font-bold mb-2\">Dashboard</h1>\n            <p className=\"text-muted-foreground\">Welcome back, {user?.name}</p>\n          </div>\n\n          <div className=\"flex p-1 bg-muted/50 rounded-lg border border-border\">\n            <button\n              onClick={() => setActiveTab('learning')}\n              className={`px-6 py-2 rounded-md text-sm font-medium transition-all ${activeTab === 'learning'\n                ? 'bg-primary text-primary-foreground shadow-sm'\n                : 'text-muted-foreground hover:text-foreground'\n                }`}\n            >\n              Learning\n            </button>\n            <button\n              onClick={() => setActiveTab('teaching')}\n              className={`px-6 py-2 rounded-md text-sm font-medium transition-all ${activeTab === 'teaching'\n                ? 'bg-primary text-primary-foreground shadow-sm'\n                : 'text-muted-foreground hover:text-foreground'\n                }`}\n            >\n              Teaching\n            </button>\n          </div>\n        </div>\n\n        {activeTab === 'learning' ? (\n          <>\n            {/* Enrolled Courses Section */}\n            <div className=\"mb-12\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-2xl font-bold\">Your Learning</h2>\n                <Link href=\"/catalog\">\n                  <button className=\"text-primary hover:text-primary/80 font-medium text-sm\">Browse more â†’</button>\n                </Link>\n              </div>\n\n              {enrolledCourses.length > 0 ? (\n                <div className=\"space-y-4\">\n                  {enrolledCourses.map((enrollment) => (\n                    <div\n                      key={enrollment.id}\n                      className=\"p-6 rounded-lg border border-border bg-card hover-glow transition-all cursor-pointer group\"\n                    >\n                      <div className=\"flex flex-col md:flex-row gap-6 items-start md:items-center\">\n                        <div className=\"flex-1\">\n                          <h3 className=\"text-lg font-bold mb-2 group-hover:text-primary transition-colors line-clamp-2\">\n                            {enrollment.course.title}\n                          </h3>\n                          <p className=\"text-sm text-muted-foreground mb-3\">{enrollment.course.instructor}</p>\n\n                          {/* Progress Bar */}\n                          <div className=\"mb-3\">\n                            <div className=\"flex items-center justify-between mb-2\">\n                              <span className=\"text-xs font-medium text-muted-foreground\">Progress</span>\n                              <span className=\"text-sm font-semibold text-primary\">{enrollment.progress}%</span>\n                            </div>\n                            <div className=\"w-full h-2 rounded-full bg-card border border-border overflow-hidden\">\n                              <div\n                                className=\"h-full bg-linear-to-r from-primary to-accent transition-all duration-500\"\n                                style={{ width: `${enrollment.progress}%` }}\n                              />\n                            </div>\n                          </div>\n\n                          <p className=\"text-xs text-muted-foreground\">Last accessed: {enrollment.lastAccessed}</p>\n                        </div>\n\n                        <div className=\"flex gap-3 w-full md:w-auto\">\n                          <Link href={`/course/${enrollment.course.id}`}>\n                            <AnimatedButton className=\"flex-1 md:flex-none\" size=\"sm\">\n                              Continue\n                            </AnimatedButton>\n                          </Link>\n                          <button\n                            onClick={async (e) => {\n                              e.preventDefault();\n                              if (!confirm('Are you sure you want to unenroll from this course?')) return;\n                              try {\n                                const res = await fetch(`/api/enrollments/${enrollment.course.id}`, { method: 'DELETE' });\n                                if (res.ok) {\n                                  setDashboardData(prev => prev ? ({\n                                    ...prev,\n                                    enrolledCourses: prev.enrolledCourses.filter(c => c.id !== enrollment.id)\n                                  }) : null);\n                                }\n                              } catch (err) {\n                                console.error(err);\n                                alert('Failed to unenroll');\n                              }\n                            }}\n                            className=\"px-4 py-2 rounded-lg border border-border hover:bg-red-500/10 hover:text-red-500 hover:border-red-500/50 transition-all text-sm font-medium\"\n                            title=\"Unenroll\"\n                          >\n                            <span className=\"sr-only\">Unenroll</span>\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M3 6h18\" /><path d=\"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\" /><path d=\"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\" /></svg>\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"p-8 rounded-lg border border-border bg-card text-center\">\n                  <p className=\"text-muted-foreground\">No courses enrolled yet. <Link href=\"/catalog\" className=\"text-primary hover:underline\">Browse courses</Link></p>\n                </div>\n              )}\n            </div>\n\n            {/* Recommended Courses */}\n            <div>\n              <h2 className=\"text-2xl font-bold mb-6\">Recommended For You</h2>\n              {recommendedCourses.length > 0 ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                  {recommendedCourses.map((course) => (\n                    <CourseCard key={course.id} {...course} />\n                  ))}\n                </div>\n              ) : (\n                <div className=\"p-8 rounded-lg border border-border bg-card text-center\">\n                  <p className=\"text-muted-foreground\">No recommendations available yet.</p>\n                </div>\n              )}\n            </div>\n          </>\n        ) : (\n          /* Teaching Tab */\n          <div>\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-2xl font-bold\">Created Courses</h2>\n              <Link href=\"/upload\">\n                <AnimatedButton size=\"sm\">\n                  Create New Course\n                </AnimatedButton>\n              </Link>\n            </div>\n\n            {createdCourses.length > 0 ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {createdCourses.map((course) => (\n                  <CourseCard\n                    key={course.id}\n                    {...course}\n                    onDelete={async (id) => {\n                      try {\n                        await import('@/lib/api').then(m => m.courseApi.deleteCourse(id))\n                        setCreatedCourses(prev => prev.filter(c => c.id !== id))\n                      } catch (e) {\n                        console.error('Failed to delete course:', e)\n                        alert('Failed to delete course')\n                      }\n                    }}\n                  />\n                ))}\n              </div>\n            ) : (\n              <div className=\"p-12 rounded-lg border border-border bg-card text-center\">\n                <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4\">\n                  <BookOpen size={32} className=\"text-primary\" />\n                </div>\n                <h3 className=\"text-xl font-bold mb-2\">Start Teaching Today</h3>\n                <p className=\"text-muted-foreground mb-6 max-w-md mx-auto\">\n                  Share your knowledge with the world. Create your first course and start earning.\n                </p>\n                <Link href=\"/upload\">\n                  <AnimatedButton>\n                    Create Your First Course\n                  </AnimatedButton>\n                </Link>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </PageLayout>\n  )\n}"],"names":[],"mappings":"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"}}]
}