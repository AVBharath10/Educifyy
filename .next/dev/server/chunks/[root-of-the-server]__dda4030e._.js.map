{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/avbha/OneDrive/Desktop/projects/educify/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst globalForPrisma = globalThis as unknown as { prisma: PrismaClient };\n\nexport const prisma =\n  globalForPrisma.prisma ||\n  new PrismaClient({\n    log: process.env.NODE_ENV === \"development\" ? [\"query\", \"info\"] : [\"error\"],\n  });\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAEjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK,uCAAyC;QAAC;QAAS;KAAO,GAAG;AACpE;AAEF,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/avbha/OneDrive/Desktop/projects/educify/lib/api-utils.ts"],"sourcesContent":["/**\n * API Response utilities\n */\n\nexport interface ApiResponse<T = null> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  message?: string;\n}\n\nexport function successResponse<T>(data: T, message?: string): ApiResponse<T> {\n  return {\n    success: true,\n    data,\n    message,\n  };\n}\n\nexport function errorResponse(error: string): ApiResponse {\n  return {\n    success: false,\n    error,\n  };\n}\n\n/**\n * Pagination utilities\n */\nexport interface PaginationParams {\n  page: number;\n  limit: number;\n}\n\nexport interface PaginatedResponse<T> {\n  data: T[];\n  pagination: {\n    page: number;\n    limit: number;\n    total: number;\n    pages: number;\n  };\n}\n\nexport function calculateSkip(page: number, limit: number): number {\n  return (page - 1) * limit;\n}\n\nexport function calculatePages(total: number, limit: number): number {\n  return Math.ceil(total / limit);\n}\n\nexport function createPaginatedResponse<T>(\n  data: T[],\n  total: number,\n  page: number,\n  limit: number\n): PaginatedResponse<T> {\n  return {\n    data,\n    pagination: {\n      page,\n      limit,\n      total,\n      pages: calculatePages(total, limit),\n    },\n  };\n}\n\n/**\n * Error handling\n */\nexport class AppError extends Error {\n  constructor(public statusCode: number, message: string) {\n    super(message);\n    this.name = \"AppError\";\n  }\n}\n\nexport class ValidationError extends AppError {\n  constructor(message: string) {\n    super(400, message);\n    this.name = \"ValidationError\";\n  }\n}\n\nexport class NotFoundError extends AppError {\n  constructor(resource: string) {\n    super(404, `${resource} not found`);\n    this.name = \"NotFoundError\";\n  }\n}\n\nexport class UnauthorizedError extends AppError {\n  constructor(message: string = \"Unauthorized\") {\n    super(401, message);\n    this.name = \"UnauthorizedError\";\n  }\n}\n\nexport class ForbiddenError extends AppError {\n  constructor(message: string = \"Forbidden\") {\n    super(403, message);\n    this.name = \"ForbiddenError\";\n  }\n}\n\nexport class ConflictError extends AppError {\n  constructor(message: string) {\n    super(409, message);\n    this.name = \"ConflictError\";\n  }\n}\n\n/**\n * Request parsing utilities\n */\nexport async function parseJsonBody(request: Request): Promise<any> {\n  try {\n    return await request.json();\n  } catch (error) {\n    throw new ValidationError(\"Invalid JSON in request body\");\n  }\n}\n\nexport async function parseFormData(request: Request): Promise<FormData> {\n  try {\n    return await request.formData();\n  } catch (error) {\n    throw new ValidationError(\"Invalid form data in request\");\n  }\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASM,SAAS,gBAAmB,IAAO,EAAE,OAAgB;IAC1D,OAAO;QACL,SAAS;QACT;QACA;IACF;AACF;AAEO,SAAS,cAAc,KAAa;IACzC,OAAO;QACL,SAAS;QACT;IACF;AACF;AAoBO,SAAS,cAAc,IAAY,EAAE,KAAa;IACvD,OAAO,CAAC,OAAO,CAAC,IAAI;AACtB;AAEO,SAAS,eAAe,KAAa,EAAE,KAAa;IACzD,OAAO,KAAK,IAAI,CAAC,QAAQ;AAC3B;AAEO,SAAS,wBACd,IAAS,EACT,KAAa,EACb,IAAY,EACZ,KAAa;IAEb,OAAO;QACL;QACA,YAAY;YACV;YACA;YACA;YACA,OAAO,eAAe,OAAO;QAC/B;IACF;AACF;AAKO,MAAM,iBAAiB;;IAC5B,YAAY,AAAO,UAAkB,EAAE,OAAe,CAAE;QACtD,KAAK,CAAC,eADW,aAAA;QAEjB,IAAI,CAAC,IAAI,GAAG;IACd;AACF;AAEO,MAAM,wBAAwB;IACnC,YAAY,OAAe,CAAE;QAC3B,KAAK,CAAC,KAAK;QACX,IAAI,CAAC,IAAI,GAAG;IACd;AACF;AAEO,MAAM,sBAAsB;IACjC,YAAY,QAAgB,CAAE;QAC5B,KAAK,CAAC,KAAK,GAAG,SAAS,UAAU,CAAC;QAClC,IAAI,CAAC,IAAI,GAAG;IACd;AACF;AAEO,MAAM,0BAA0B;IACrC,YAAY,UAAkB,cAAc,CAAE;QAC5C,KAAK,CAAC,KAAK;QACX,IAAI,CAAC,IAAI,GAAG;IACd;AACF;AAEO,MAAM,uBAAuB;IAClC,YAAY,UAAkB,WAAW,CAAE;QACzC,KAAK,CAAC,KAAK;QACX,IAAI,CAAC,IAAI,GAAG;IACd;AACF;AAEO,MAAM,sBAAsB;IACjC,YAAY,OAAe,CAAE;QAC3B,KAAK,CAAC,KAAK;QACX,IAAI,CAAC,IAAI,GAAG;IACd;AACF;AAKO,eAAe,cAAc,OAAgB;IAClD,IAAI;QACF,OAAO,MAAM,QAAQ,IAAI;IAC3B,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,gBAAgB;IAC5B;AACF;AAEO,eAAe,cAAc,OAAgB;IAClD,IAAI;QACF,OAAO,MAAM,QAAQ,QAAQ;IAC/B,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,gBAAgB;IAC5B;AACF"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/avbha/OneDrive/Desktop/projects/educify/app/api/users/%5Bid%5D/dashboard/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/prisma\";\nimport { successResponse, errorResponse } from \"@/lib/api-utils\";\n\n\nexport async function GET(\n  request: NextRequest,\n  context: { params: Promise<{ id: string }> } // FIXED\n) {\n  try {\n    const { id: profileId } = await context.params; // FIXED\n\n    const userId = request.headers.get(\"x-user-id\");\n\n    if (!userId || userId !== profileId) {\n      return NextResponse.json(errorResponse(\"Forbidden\"), { status: 403 });\n    }\n\n    const enrollments = await prisma.enrollment.findMany({\n      where: { userId: profileId },\n      include: {\n        course: {\n          include: {\n            instructor: { select: { name: true } },\n          },\n        },\n      },\n      take: 10,\n      orderBy: { lastAccessed: \"desc\" },\n    });\n\n    // Stats\n    const activeCourses = enrollments.filter((e) => e.status === \"ACTIVE\").length;\n    const completedCourses = enrollments.filter((e) => e.status === \"COMPLETED\").length;\n\n    // Recommended courses (not enrolled)\n    const recommendedCourses = await prisma.course.findMany({\n      where: {\n        status: \"PUBLISHED\",\n        enrollments: { none: { userId: profileId } },\n      },\n      take: 3,\n      include: {\n        instructor: { select: { name: true } },\n      },\n    });\n\n    const formatted = {\n      stats: {\n        activeCourses,\n        totalHours: 145, // TODO: replace with real hours later\n        completedCourses,\n        currentStreak: 12, // TODO: replace with real streak later\n      },\n      enrolledCourses: enrollments.map((e) => ({\n        id: e.id,\n        courseId: e.course.id,\n        course: {\n          id: e.course.id,\n          title: e.course.title,\n          instructor: e.course.instructor.name,\n          category: e.course.category,\n          difficulty: e.course.difficulty,\n          duration: e.course.duration,\n          thumbnail: e.course.thumbnail,\n          price: e.course.price,\n        },\n        progress: e.progress,\n        lastAccessed: e.lastAccessed,\n      })),\n      recommendedCourses: recommendedCourses.map((course) => ({\n        id: course.id,\n        title: course.title,\n        instructor: course.instructor.name,\n        category: course.category,\n        difficulty: course.difficulty,\n        rating: course.rating,\n        students: course.studentsEnrolled,\n        duration: course.duration,\n        price: course.price,\n        thumbnail: course.thumbnail,\n      })),\n    };\n\n    return NextResponse.json(successResponse(formatted));\n  } catch (error) {\n    console.error(\"Get dashboard error:\", error);\n    return NextResponse.json(errorResponse(\"Failed to fetch dashboard\"), {\n      status: 500,\n    });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAGO,eAAe,IACpB,OAAoB,EACpB,OAA4C,AAAC,QAAQ;;IAErD,IAAI;QACF,MAAM,EAAE,IAAI,SAAS,EAAE,GAAG,MAAM,QAAQ,MAAM,EAAE,QAAQ;QAExD,MAAM,SAAS,QAAQ,OAAO,CAAC,GAAG,CAAC;QAEnC,IAAI,CAAC,UAAU,WAAW,WAAW;YACnC,OAAO,8LAAY,CAAC,IAAI,CAAC,IAAA,oLAAa,EAAC,cAAc;gBAAE,QAAQ;YAAI;QACrE;QAEA,MAAM,cAAc,MAAM,uKAAM,CAAC,UAAU,CAAC,QAAQ,CAAC;YACnD,OAAO;gBAAE,QAAQ;YAAU;YAC3B,SAAS;gBACP,QAAQ;oBACN,SAAS;wBACP,YAAY;4BAAE,QAAQ;gCAAE,MAAM;4BAAK;wBAAE;oBACvC;gBACF;YACF;YACA,MAAM;YACN,SAAS;gBAAE,cAAc;YAAO;QAClC;QAEA,QAAQ;QACR,MAAM,gBAAgB,YAAY,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,UAAU,MAAM;QAC7E,MAAM,mBAAmB,YAAY,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,aAAa,MAAM;QAEnF,qCAAqC;QACrC,MAAM,qBAAqB,MAAM,uKAAM,CAAC,MAAM,CAAC,QAAQ,CAAC;YACtD,OAAO;gBACL,QAAQ;gBACR,aAAa;oBAAE,MAAM;wBAAE,QAAQ;oBAAU;gBAAE;YAC7C;YACA,MAAM;YACN,SAAS;gBACP,YAAY;oBAAE,QAAQ;wBAAE,MAAM;oBAAK;gBAAE;YACvC;QACF;QAEA,MAAM,YAAY;YAChB,OAAO;gBACL;gBACA,YAAY;gBACZ;gBACA,eAAe;YACjB;YACA,iBAAiB,YAAY,GAAG,CAAC,CAAC,IAAM,CAAC;oBACvC,IAAI,EAAE,EAAE;oBACR,UAAU,EAAE,MAAM,CAAC,EAAE;oBACrB,QAAQ;wBACN,IAAI,EAAE,MAAM,CAAC,EAAE;wBACf,OAAO,EAAE,MAAM,CAAC,KAAK;wBACrB,YAAY,EAAE,MAAM,CAAC,UAAU,CAAC,IAAI;wBACpC,UAAU,EAAE,MAAM,CAAC,QAAQ;wBAC3B,YAAY,EAAE,MAAM,CAAC,UAAU;wBAC/B,UAAU,EAAE,MAAM,CAAC,QAAQ;wBAC3B,WAAW,EAAE,MAAM,CAAC,SAAS;wBAC7B,OAAO,EAAE,MAAM,CAAC,KAAK;oBACvB;oBACA,UAAU,EAAE,QAAQ;oBACpB,cAAc,EAAE,YAAY;gBAC9B,CAAC;YACD,oBAAoB,mBAAmB,GAAG,CAAC,CAAC,SAAW,CAAC;oBACtD,IAAI,OAAO,EAAE;oBACb,OAAO,OAAO,KAAK;oBACnB,YAAY,OAAO,UAAU,CAAC,IAAI;oBAClC,UAAU,OAAO,QAAQ;oBACzB,YAAY,OAAO,UAAU;oBAC7B,QAAQ,OAAO,MAAM;oBACrB,UAAU,OAAO,gBAAgB;oBACjC,UAAU,OAAO,QAAQ;oBACzB,OAAO,OAAO,KAAK;oBACnB,WAAW,OAAO,SAAS;gBAC7B,CAAC;QACH;QAEA,OAAO,8LAAY,CAAC,IAAI,CAAC,IAAA,sLAAe,EAAC;IAC3C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,8LAAY,CAAC,IAAI,CAAC,IAAA,oLAAa,EAAC,8BAA8B;YACnE,QAAQ;QACV;IACF;AACF"}}]
}